## 文件系统

长期存储信息的三个基本要求：

1. 能够存储大量信息
2. 使用信息的进程终止时，信息仍旧存在
3. 必须能使多个进程并发访问有关信息

**文件**是进程创建的信息逻辑单元。

进程可以读取已经存在的文件，并在需要时建立新的文件。存储在文件中的信息必须是持久的。

操作系统中处理文件的部分称为文件系统。

### 文件

#### 文件命名

在进程创建文件时命名，在进程终止时，该文件仍旧存在，并且其他进程可以通过这个文件名对它进行访问。

文件名圆点后面的部分称为文件扩展名，通常表示文件的一些信息。

#### 文件结构

- 字节结构
- 记录结构
- 树

#### 文件类型

- 普通文件：包含有用户信息的文件
- 目录：管理文件系统结构的系统文件
- 字符特殊文件：用于串行 I/O 设备
- 块特殊文件：用于磁盘类设备

普通文件一般分为 ASCII 文件和二进制文件。

ASCII 文件的最大优势是可以显示和打印，还可以用任何文本编辑器进行编辑。另外如果很多程序都以 ASCII 文件作为输入和输出，就很容易把一个程序的输出作为另一个程序的输入。

二进制文件打印出来是无法理解的、充满混乱的一张表。通常二进制文件有一定的内部结构，使用该文件的程序才了解这种结构。只有文件格式正确时，操作系统才会执行这个文件。

早期的 UNIX 二进制文件有五个段：文件头、正文、数据、重定位位及符号表。文件头以魔数开始，表明该文件是一个可执行的文件。魔数后面是文件中各段的长度、执行的起始位置和一些标志位。程序本身的正义和数据在文件头后面。这些被装入内存，并使用重定位位重新定位。

#### 文件访问

- 顺序访问
- 随机访问文件

#### 文件属性

如文件创建的日期和时间、文件大小等，这些附加信息称为文件属性，也称为元数据。

#### 文件操作

- create
- delete
- open
- close
- read
- write
- append：只能在文件末尾添加数据
- seek：对于随机访问文件，要指定从何处开始获取数据，通常的方法是用 seek 系统调用把当前位置指针指向文件的特殊位置
- get attributes
- set attributes
- rename

### 目录

#### 一级目录系统

在一个目录中包含所有的文件，有时也称为根目录。优点是简单并且能够快速定位文件。

#### 层次目录系统

通过这种方式可以用很多目录把文件以自然的方式分组。

#### 路径名

- 绝对路径名：从根目录到文件的路径组成。
- 相对路径名：常和工作目录（当前目录）一起使用。

#### 目录操作

- create
- delete
- closedir
- readdir
- rename
- link：链接技术允许在多个目录中出现同一个文件
- unlink：删除目录项，即删除指定目录下的文件

